<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>SunHash -- Pre-Construction Solar Risk Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;800;900&family=Barlow:wght@400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root{
  --bg:#E4E4E0;--black:#111111;--yellow:#DDFF00;--white:#F0F0EC;
  --gray-lt:#D4D4D0;--gray:#B8B8B4;--gray-dk:#888884;--red:#E83535;
  --fh:'Barlow Condensed',sans-serif;--fb:'Barlow',sans-serif;--bk:2px solid #111111;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;}
body{font-family:var(--fb);background:var(--black);color:var(--white);
  display:grid;grid-template-columns:420px 1fr;min-height:100vh;
  -webkit-font-smoothing:antialiased;}
@media(max-width:900px){body{grid-template-columns:1fr;}}
a{text-decoration:none;}

/* ===== LEFT: AUTH PANEL ===== */
.auth-panel{
  background:var(--black);
  border-right:3px solid var(--yellow);
  display:flex;flex-direction:column;
  padding:40px 40px 32px;
  min-height:100vh;
  overflow-y:auto;
}
@media(max-width:900px){.auth-panel{border-right:none;border-bottom:3px solid var(--yellow);min-height:auto;}}

.logo{font-family:var(--fh);font-size:22px;font-weight:900;letter-spacing:3px;
  text-transform:uppercase;color:var(--white);margin-bottom:40px;display:block;}
.logo span{color:var(--yellow);}

.auth-headline{font-family:var(--fh);font-size:13px;font-weight:700;letter-spacing:4px;
  text-transform:uppercase;color:var(--yellow);margin-bottom:10px;}
.auth-title{font-family:var(--fh);font-size:clamp(28px,3vw,38px);font-weight:900;
  text-transform:uppercase;letter-spacing:-1px;line-height:.95;
  color:var(--white);margin-bottom:28px;}

/* Tab switcher */
.tab-row{display:flex;border:var(--bk);margin-bottom:24px;}
.tab-btn{flex:1;padding:10px;border:none;background:#1E1E1E;color:var(--gray-dk);
  font-family:var(--fh);font-size:13px;font-weight:800;letter-spacing:2px;
  text-transform:uppercase;cursor:pointer;transition:all .15s;}
.tab-btn.active{background:var(--yellow);color:var(--black);}
.tab-btn:not(.active):hover{background:#2A2A2A;color:var(--white);}

/* Form box */
.form-box{display:flex;flex-direction:column;}
.field{margin-bottom:16px;}
.field label{display:block;font-family:var(--fh);font-size:10px;font-weight:700;
  letter-spacing:2px;text-transform:uppercase;color:var(--gray-dk);margin-bottom:6px;}
.field input{width:100%;padding:11px 13px;background:#1A1A1A;border:var(--bk);
  font-family:var(--fb);font-size:14px;color:var(--white);outline:none;}
.field input::placeholder{color:#444;}
.field input:focus{border-color:var(--yellow);box-shadow:0 0 0 1px var(--yellow);}

/* Google button */
.btn-google{width:100%;padding:12px;background:#1E1E1E;border:var(--bk);
  color:var(--white);font-family:var(--fh);font-size:13px;font-weight:800;
  letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  display:flex;align-items:center;justify-content:center;gap:10px;
  margin-bottom:16px;transition:all .15s;}
.btn-google:hover{background:var(--yellow);color:var(--black);}
.btn-google:disabled{opacity:.5;cursor:not-allowed;}
.btn-google svg{width:17px;height:17px;flex-shrink:0;}

.or{text-align:center;font-family:var(--fh);font-size:10px;font-weight:700;
  letter-spacing:2px;color:#444;margin:0 0 16px;position:relative;}
.or::before,.or::after{content:'';position:absolute;top:50%;width:40%;height:1px;background:#333;}
.or::before{left:0;}.or::after{right:0;}

/* Submit button */
.btn-submit{width:100%;padding:14px;background:var(--yellow);border:var(--bk);
  color:var(--black);font-family:var(--fh);font-size:15px;font-weight:900;
  letter-spacing:3px;text-transform:uppercase;cursor:pointer;margin-top:4px;
  transition:all .15s;}
.btn-submit:hover{background:var(--white);}
.btn-submit:disabled{opacity:.4;cursor:not-allowed;}

.msg{min-height:18px;margin-top:10px;font-size:12px;font-weight:600;line-height:1.5;}
.msg.err{color:#ff6b6b;}.msg.ok{color:#66bb77;}

.form-footer{margin-top:20px;display:flex;flex-direction:column;gap:8px;
  align-items:center;border-top:1px solid #222;padding-top:16px;}
.form-footer a,.form-footer button{font-size:12px;color:var(--gray-dk);
  background:none;border:none;cursor:pointer;transition:color .15s;}
.form-footer a:hover,.form-footer button:hover{color:var(--white);}
.form-footer .signup-link{font-size:13px;color:var(--gray);}
.form-footer .signup-link a{color:var(--yellow);font-weight:700;}

.auth-bottom{margin-top:auto;padding-top:32px;
  font-size:11px;color:#333;line-height:1.6;}

/* ===== RIGHT: LANDING PANEL ===== */
.landing-panel{
  background:var(--black);
  display:flex;flex-direction:column;
  overflow-y:auto;
}
@media(max-width:900px){.landing-panel{display:none;}}

/* Hero section */
.lp-hero{background:var(--black);padding:56px 56px 48px;flex-shrink:0;border-bottom:2px solid #1A1A1A;}
.lp-eyebrow{font-family:var(--fh);font-size:11px;font-weight:700;letter-spacing:5px;
  text-transform:uppercase;color:var(--yellow);margin-bottom:20px;}
.lp-h1{font-family:var(--fh);font-size:clamp(48px,5vw,80px);font-weight:900;
  text-transform:uppercase;line-height:.90;letter-spacing:-3px;
  color:var(--white);margin-bottom:24px;}
.lp-h1 em{color:var(--yellow);font-style:normal;display:block;}
.lp-sub{font-size:16px;color:#555;max-width:520px;line-height:1.8;margin-bottom:40px;}

/* Score strip */
.score-row{display:flex;gap:0;border:var(--bk);max-width:480px;}
.sc{flex:1;border-right:var(--bk);padding:14px 8px;background:#141414;text-align:center;}
.sc:last-child{border-right:none;}
.sc-v{font-family:var(--fh);font-size:26px;font-weight:900;line-height:1;}
.sc-l{font-family:var(--fh);font-size:9px;font-weight:700;letter-spacing:1px;
  text-transform:uppercase;color:#444;margin-top:3px;}
.sc.hi .sc-v{color:var(--yellow);}
.sc.md .sc-v{color:var(--white);}
.sc.lo .sc-v{color:var(--red);}
.score-cap{font-family:var(--fh);font-size:10px;font-weight:700;letter-spacing:2px;
  text-transform:uppercase;color:#333;margin-top:8px;max-width:480px;}

/* How it works */
.lp-how{padding:48px 56px;flex-shrink:0;border-bottom:2px solid #1A1A1A;}
.lp-section-tag{font-family:var(--fh);font-size:10px;font-weight:700;letter-spacing:4px;
  text-transform:uppercase;background:var(--yellow);color:var(--black);
  display:inline-block;padding:3px 10px;margin-bottom:16px;}
.lp-section-title{font-family:var(--fh);font-size:28px;font-weight:900;
  text-transform:uppercase;letter-spacing:-1px;color:var(--white);margin-bottom:28px;}
.steps{display:grid;grid-template-columns:1fr 1fr;gap:0;border:1px solid #1E1E1E;}
.step{padding:24px;border-right:1px solid #1E1E1E;border-bottom:1px solid #1E1E1E;}
.step:nth-child(2n){border-right:none;}
.step:nth-last-child(-n+2){border-bottom:none;}
.step-n{font-family:var(--fh);font-size:36px;font-weight:900;color:var(--yellow);
  line-height:1;margin-bottom:10px;}
.step h4{font-family:var(--fh);font-size:14px;font-weight:800;text-transform:uppercase;
  letter-spacing:.5px;color:var(--white);margin-bottom:6px;}
.step p{font-size:12px;color:#555;line-height:1.7;}

/* Categories */
.lp-cats{padding:48px 56px;flex-shrink:0;}
.cat-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:0;border:1px solid #1E1E1E;margin-top:16px;}
.cat{padding:20px;border-right:1px solid #1E1E1E;border-bottom:1px solid #1E1E1E;}
.cat:nth-child(3n){border-right:none;}
.cat:nth-last-child(-n+3){border-bottom:none;}
.cat-w{font-family:var(--fh);font-size:26px;font-weight:900;color:var(--yellow);line-height:1;margin-bottom:4px;}
.cat-n{font-family:var(--fh);font-size:13px;font-weight:800;text-transform:uppercase;color:var(--white);margin-bottom:4px;}
.cat-d{font-size:11px;color:#444;line-height:1.5;}
</style>
</head>
<body>

<!-- ===== LEFT: AUTH ===== -->
<div class="auth-panel">
  <a href="login.html" class="logo">Sun<span>Hash</span></a>

  <div class="auth-headline">Risk Intelligence Platform</div>
  <div class="auth-title">Sign in or<br>get started</div>

  <!-- TABS -->
  <div class="tab-row">
    <button class="tab-btn active" id="tab-login" onclick="showTab('login')">Sign In</button>
    <button class="tab-btn" id="tab-signup" onclick="showTab('signup')">Create Account</button>
  </div>

  <!-- LOGIN -->
  <div id="form-login" class="form-box">
    <button class="btn-google" id="btn-google-li" onclick="authGoogle.call(this)">
      <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
      Continue with Google
    </button>
    <div class="or">OR</div>
    <div class="field"><label>Email</label><input type="email" id="li-email" placeholder="you@company.com" autocomplete="email"/></div>
    <div class="field"><label>Password</label><input type="password" id="li-pw" placeholder="********" autocomplete="current-password"/></div>
    <button class="btn-submit" id="btn-li" onclick="doLogin()">Sign In -></button>
    <div class="msg" id="li-msg"></div>
    <div class="form-footer">
      <button onclick="showReset()">Forgot password?</button>
      <div class="signup-link">No account? <a href="signup.html">Create one for free</a></div>
    </div>
  </div>

  <!-- QUICK SIGNUP (tab) -->
  <div id="form-signup" class="form-box" style="display:none;">
    <button class="btn-google" id="btn-google-su" onclick="authGoogle.call(this)">
      <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
      Continue with Google
    </button>
    <div class="or">OR</div>
    <div class="field"><label>Email</label><input type="email" id="su-email" placeholder="you@company.com" autocomplete="email"/></div>
    <div class="field"><label>Password (min 8 chars)</label><input type="password" id="su-pw" placeholder="********" autocomplete="new-password"/></div>
    <button class="btn-submit" id="btn-su" onclick="doSignup()">Create Account -></button>
    <div class="msg" id="su-msg"></div>
    <div class="form-footer">
      <div class="signup-link">Already have an account? <a href="#" onclick="showTab('login');return false;">Sign in</a></div>
    </div>
  </div>

  <!-- PASSWORD RESET -->
  <div id="form-reset" class="form-box" style="display:none;">
    <p style="font-size:13px;color:var(--gray-dk);line-height:1.7;margin-bottom:16px;">Enter your email and we'll send a reset link.</p>
    <div class="field"><label>Email</label><input type="email" id="rs-email" placeholder="you@company.com"/></div>
    <button class="btn-submit" onclick="doReset()">Send Reset Link -></button>
    <div class="msg" id="rs-msg"></div>
    <div class="form-footer">
      <button onclick="showTab('login')"><- Back to sign in</button>
    </div>
  </div>

  <div class="auth-bottom">Your data is encrypted. Never shared with third parties.</div>
</div>

<!-- ===== RIGHT: LANDING ===== -->
<div class="landing-panel">

  <div class="lp-hero">
    <div class="lp-eyebrow">Pre-construction Solar Risk Intelligence</div>
    <div class="lp-h1">Know your<em>project risks</em>before they cost you.</div>
    <p class="lp-sub">SunHash delivers AI-powered risk assessment across six engineering categories. Structured inputs, scored output, actionable PDF report in minutes.</p>
    <div class="score-row">
      <div class="sc hi"><div class="sc-v">85</div><div class="sc-l">Design</div></div>
      <div class="sc md"><div class="sc-v">72</div><div class="sc-l">Build</div></div>
      <div class="sc lo"><div class="sc-v">44</div><div class="sc-l">Contract</div></div>
      <div class="sc md"><div class="sc-v">68</div><div class="sc-l">Grid</div></div>
      <div class="sc hi"><div class="sc-v">91</div><div class="sc-l">Permit</div></div>
      <div class="sc lo"><div class="sc-v">55</div><div class="sc-l">Finance</div></div>
    </div>
    <div class="score-cap">Example project score -- six weighted categories, 0-100</div>
  </div>

  <div class="lp-how">
    <div class="lp-section-tag">How It Works</div>
    <div class="lp-section-title">Four steps to your risk report</div>
    <div class="steps">
      <div class="step">
        <div class="step-n">01</div>
        <h4>Project intake</h4>
        <p>Define project type, capacity, stage, and procurement structure. Sets the logic for all downstream questions.</p>
      </div>
      <div class="step">
        <div class="step-n">02</div>
        <h4>Answer or upload</h4>
        <p>Work through structured questions or upload your geotech report, design basis, or EPC offer. AI fills what it can.</p>
      </div>
      <div class="step">
        <div class="step-n">03</div>
        <h4>Scored report</h4>
        <p>PDF with six category scores, named critical issues, prioritised action plan, and data gaps. Ready in minutes.</p>
      </div>
      <div class="step">
        <div class="step-n">04</div>
        <h4>Enrich with specialists</h4>
        <p>Invite your EPC, engineer, or lender to fill their section. Each response updates your score automatically.</p>
      </div>
    </div>
  </div>

  <div class="lp-cats">
    <div class="lp-section-tag">Risk Categories</div>
    <div class="lp-section-title">Six scored dimensions</div>
    <div class="cat-grid">
      <div class="cat"><div class="cat-w">20%</div><div class="cat-n">Design & Engineering</div><div class="cat-d">Electrical config, module/inverter spec, geotechnical, energy model.</div></div>
      <div class="cat"><div class="cat-w">20%</div><div class="cat-n">Construction</div><div class="cat-d">Crew capacity, production rates, schedule variance, contractor health.</div></div>
      <div class="cat"><div class="cat-w">15%</div><div class="cat-n">Contract & Legal</div><div class="cat-d">EPC structure, LD coverage, PPA terms, bonding, disputes.</div></div>
      <div class="cat"><div class="cat-w">15%</div><div class="cat-n">Interconnection</div><div class="cat-d">Queue position, upgrade costs, IA status, curtailment exposure.</div></div>
      <div class="cat"><div class="cat-w">15%</div><div class="cat-n">Financial & Tax</div><div class="cat-d">DSCR at P90, ITC eligibility, O&M accuracy, reserve accounts.</div></div>
      <div class="cat"><div class="cat-w">15%</div><div class="cat-n">Permitting</div><div class="cat-d">Permit status, environmental clearances, site control, AHJ readiness.</div></div>
    </div>
  </div>

</div>

<script>
// -- CONFIG (replace with your real values) --------------------
const SUPABASE_URL = 'https://YOUR_PROJECT_ID.supabase.co';
const SUPABASE_KEY = 'YOUR_ANON_PUBLIC_KEY';
// -------------------------------------------------------------
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// Tab switcher
function showTab(tab) {
  document.getElementById('form-login').style.display  = tab === 'login'  ? 'flex' : 'none';
  document.getElementById('form-signup').style.display = tab === 'signup' ? 'flex' : 'none';
  document.getElementById('form-reset').style.display  = 'none';
  document.getElementById('tab-login').classList.toggle('active', tab === 'login');
  document.getElementById('tab-signup').classList.toggle('active', tab === 'signup');
}

function showReset() {
  document.getElementById('form-login').style.display  = 'none';
  document.getElementById('form-signup').style.display = 'none';
  document.getElementById('form-reset').style.display  = 'flex';
  document.getElementById('tab-login').classList.remove('active');
  document.getElementById('tab-signup').classList.remove('active');
}

function setMsg(id, text, type) {
  const el = document.getElementById(id);
  if (!el) return;
  el.textContent = text;
  el.className = 'msg ' + (type || '');
}

// Google OAuth
async function authGoogle() {
  const btn = this;
  const origHTML = btn.innerHTML;
  btn.textContent = 'Connecting...';
  btn.disabled = true;
  try {
    const base = window.location.origin + window.location.pathname.replace(/[^/]*$/, '');
    const { error } = await sb.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: base + 'dashboard.html' }
    });
    if (error) {
      setMsg('li-msg', 'Google error: ' + error.message, 'err');
      btn.innerHTML = origHTML;
      btn.disabled = false;
    }
    // No error = page redirects to Google, button stays disabled
  } catch(e) {
    setMsg('li-msg', 'Connection error: ' + e.message, 'err');
    btn.innerHTML = origHTML;
    btn.disabled = false;
  }
}

// Email login
async function doLogin() {
  const btn = document.getElementById('btn-li');
  btn.disabled = true; btn.textContent = 'Signing in...';
  const { error } = await sb.auth.signInWithPassword({
    email:    document.getElementById('li-email').value.trim(),
    password: document.getElementById('li-pw').value,
  });
  btn.disabled = false; btn.textContent = 'Sign In ->';
  if (error) { setMsg('li-msg', error.message, 'err'); return; }
  window.location.href = 'dashboard.html';
}

// Quick signup (email + password only, then go to signup.html for profile)
async function doSignup() {
  const btn = document.getElementById('btn-su');
  const email = document.getElementById('su-email').value.trim();
  const pw    = document.getElementById('su-pw').value;
  if (!email) { setMsg('su-msg', 'Please enter your email.', 'err'); return; }
  if (pw.length < 8) { setMsg('su-msg', 'Password must be at least 8 characters.', 'err'); return; }
  btn.disabled = true; btn.textContent = 'Creating account...';
  const { data, error } = await sb.auth.signUp({ email, password: pw });
  btn.disabled = false; btn.textContent = 'Create Account ->';
  if (error) { setMsg('su-msg', error.message, 'err'); return; }
  if (data.user && data.user.identities && data.user.identities.length === 0) {
    setMsg('su-msg', 'This email already has an account. Sign in instead.', 'err'); return;
  }
  if (data.session) {
    // Signed in immediately -- go to full signup page for profile info
    window.location.href = 'signup.html';
  } else {
    setMsg('su-msg', 'Check your email to confirm your account, then sign in.', 'ok');
  }
}

// Password reset
async function doReset() {
  const base = window.location.origin + window.location.pathname.replace(/[^/]*$/, '');
  const { error } = await sb.auth.resetPasswordForEmail(
    document.getElementById('rs-email').value.trim(),
    { redirectTo: base + 'profile.html' }
  );
  if (error) { setMsg('rs-msg', error.message, 'err'); return; }
  setMsg('rs-msg', 'Reset link sent -- check your inbox.', 'ok');
}

// On load: redirect if already logged in
document.addEventListener('DOMContentLoaded', async () => {
  try {
    const { data: { session } } = await sb.auth.getSession();
    if (session) window.location.href = 'dashboard.html';
  } catch(e) { /* stay on page */ }
});

// Enter key support
document.addEventListener('keydown', e => {
  if (e.key !== 'Enter') return;
  const loginVisible = document.getElementById('form-login').style.display !== 'none';
  const signupVisible = document.getElementById('form-signup').style.display !== 'none';
  if (loginVisible) doLogin();
  else if (signupVisible) doSignup();
});
</script>
</body>
</html>
